
var configuser=new Object();configuser=readArray('configuser');if(!configuser.hasOwnProperty("favbar_pinned"))
configuser["favbar_pinned"]=0;if(!configuser.hasOwnProperty("icon_bgcolor"))
configuser["favbar_hidden"]=0;if(!configuser.hasOwnProperty("filter_hidden"))
configuser["filter_hidden"]=0;if(!configuser.hasOwnProperty("icon_bgcolor"))
configuser["icon_bgcolor"]='FFFFFF';var errormessage='';var emailReg=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,6})?$/;function ajax(url,vars,callbackFunction)
{var request=window.XMLHttpRequest?new XMLHttpRequest():new ActiveXObject("MSXML2.XMLHTTP.3.0");request.open("POST",url,true);request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");request.onreadystatechange=function()
{if(request.readyState==4&&request.status==200)
{if(request.responseText)
{callbackFunction(request.responseText);}}};request.send(vars);}
function rateresult(result)
{var result2='http://www.dummy.com/index.php?'+result;var html_ratingbar=getURLParameters('html_ratingbar',result2);var html_ratingvalues=getURLParameters('html_ratingvalues',result2);var html_ratingtext=getURLParameters('html_ratingtext',result2);var html_ratingbar=decodeURIComponent(html_ratingbar);var html_ratingvalues=decodeURIComponent(html_ratingvalues);var html_ratingtext=decodeURIComponent(html_ratingtext);document.getElementById('ratingbar').innerHTML=html_ratingbar;if(html_ratingvalues)
document.getElementById('ratingvalues').innerHTML=html_ratingvalues;document.getElementById('ratingtext').innerHTML=html_ratingtext;}
var rating_running=0;function rate(type,id,rating)
{if(type=='iconset'&&(rating_running==0))
{rating_running=1;document.getElementById('ratingbar').innerHTML='<img src=/images/rating/bar_progress.gif width=108px height=10px>';vars='set_id='+id+'&rating='+rating;ajax('/inc/applic/ajax_rating.php',vars,rateresult);}}
function getURLParameters(name,url)
{name=name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regexS="[\\?&]"+name+"=([^&#]*)";var regex=new RegExp(regexS);var results=regex.exec(url);if(results==null)
return"";else
return results[1];}
function track(u){if(document.images){(new Image()).src="http://www.iconarchive.com/static/php/clicklog/_track.php?id="+u;}return true;}
function trackadblock(adblock){if(document.images){(new Image()).src="http://www.iconarchive.com/inc/trackadblock.php?adblock="+adblock;}return true;}
var boxycontentlogin='<div><div class="boxy-content-intro">Don\'t have an account? <a href="#" onclick="showloginbox(\'register\');">Create one</a>, it\'s simple and free.<br><a href="#" onclick="showloginbox(\'forgotpassword\');">Forgot your password?</a></div><div class="boxy-content-main"><form class="form-login" name="login" action=""><label>Email or Username:</label><input id="login-username" class="input-text" type="text" name="login_username" value="" /><br><label>Password:</label><input id="login-password" class="input-text" name="login_password" value="" type="password" /><div id="message-main" class="message red"></div><input type="submit" value="Submit" id="login-submitbutton" class="input-submit" name="submit" /></form></div></div>';var boxycontentloginlogout='<div><div class="boxy-content-main"><div class="logout"><div id="message-main" class="message">&nbsp;</div><div class="boxy-close-button">OK</div></div></div>';var boxycontentloginregister='<div><div class="boxy-content-intro">Do you already have a free IconArchive Account? <a href="#" onclick="showloginbox(\'login\');">Login</a>.<br /><br />Benefits: Extended icon storage, view your favorite icons from anywhere,<br />share your favorite icons with friends or customers</div><div class="boxy-content-main"><form class="form-register" name="form-register" action=""><label>Username:</label><input id="register-username" class="input-text" type="text" name="login_username" value="" style="width:150px;" /><b>.iconarchive.com</b><div id="register-username-check">Availability check</div><div class="message small">Only letters, numbers, and hyphens can be used.<br />You should not select names which are known trademarks (such as company names)</div><label>Email:</label><input id="register-email" class="input-text" name="login_password" value="" /><div class="message">The password will be sent to your email address.</div><div id="message-main" class="message red"></div><input type="submit" value="Submit" id="register-submitbutton" class="input-submit" name="submit" /></form></div></div>';var boxycontentloginregister_success='<form class="form-register"><h2><div class="greenok">Thank you, your registration was successful.</div></h2>We sent you the passwort to your email address: ###email###<br />To activate your account, please <a href="#" onclick="showloginbox(\'login\');"><b>log in</b></a> within the next 3 days.<br /><br /><b>Your new URL is: <a href="http://###usernamesmall###.iconarchive.com">http://###usernamesmall###.iconarchive.com</a></b><div class="boxy-close-button">OK</div></form>';var boxycontentloginforgotpassword='<div><div class="boxy-content-intro">Please enter your email address or the username you used to create your account,<br />and we\'ll email you a new password.<br /><a href="#" onclick="showloginbox(\'login\');">Login</a>.</div><div class="boxy-content-main"><form class="form-forgotpassword" name="forgotpassword" action=""><label>Email or Username:</label><input id="forgotpassword-username" class="input-text" type="text" name="forgotpassword_username" value="" /><div id="message-main" class="message"></div><input type="submit" value="Submit" id="forgotpassword-submitbutton" class="input-submit" name="submit" /></form></div></div>';var boxycontentloginforgotpassword_success='<h2><div class="greenok">We\'ve sent you a mail.</div></h2>Please check your mailbox,<br />we\'ve sent a mail with a new passwort to your email address.<br /><br /><a href="#" onclick="showloginbox(\'login\');">Continue with Login</a>.';var boxycontentcreatead='<div><div class="boxy-content-intro">Thanks for your interest to place an ad in this section.<br />Please fill out the necessary ad details below to start.</div><div class="boxy-content-main"><form class="ad-register"><label style="padding-bottom:0px;">Design</label><b>Destination URL </b><br /><label></label><input id="ad-url" class="input-text" name="ad_url" value="http://" /><br /><label></label><b>Title</b> (<span id="ad-title-char-counter">30</span> characters left)<br /><label></label><input id="ad-title" class="input-text" name="ad_title" value="" /><br /><label></label><b>Body Text</b> (<span id="ad-body-char-counter">175</span> characters left)<br /><label></label><textarea id="ad-body" class="input-textarea" name="ad_body"></textarea><br /><label></label><b>Image URL</b> (width:180px, height:150px)<br /><label></label><input id="ad-image" class="input-text" name="ad_image" value="http://" /><br /><label>Price</label>US$<span class="ad-price">60</span>/month (paypal or moneybookers/skrill)<input type="hidden" name="ad_price" value="" id="ad-price-hidden"><br /><label>Duration</label><select name="ad_duration" id="ad-duration" class="input-select"><option value="1">1 Month</option><option value="2" selected>2 Months</option><option value="3">3 Months</option><option value="4">4 Months (10% discount)</option><option value="6">6 Months (20% discount)</option></select><br /><label>Contact Name</label><input id="ad-contact-name" class="input-text" name="ad_contact_name" value="" /><br /><label>Contact Email</label><input id="ad-contact-email" class="input-text" name="ad_contact_email" value="" /><br /><div class="message" style="margin-top:10px;"></div><div id="message-main" class="message red"></div><input type="submit" value="Submit" id="ad-submitbutton" class="input-submit" name="submit" style="margin-left:130px;" /></form></div></div>';var boxycontentcreateadbigpic='<div><div class="boxy-content-intro">Thanks for your interest to place an ad in this section.<br />Please fill out the necessary ad details below to start.</div><div class="boxy-content-main"><form class="ad-register"><label style="padding-bottom:0px;">Design</label><b>Destination URL </b><br /><label></label><input id="ad-url" class="input-text" name="ad_url" value="http://" /><br /><label></label><b>Image URL</b> (width:500px, height:350px)<br /><label></label><input id="ad-image" class="input-text" name="ad_image" value="http://" /><br /><label>Price</label>US$<span class="ad-price">80</span>/month (paypal or moneybookers/skrill)<input type="hidden" name="ad_price" value="" id="ad-price-hidden"><br /><label>Duration</label><select name="ad_duration" id="ad-duration" class="input-select"><option value="1">1 Month</option><option value="2" selected>2 Months</option><option value="3">3 Months</option><option value="4">4 Months (10% discount)</option><option value="6">6 Months (20% discount)</option></select><br /><label>Contact Name</label><input id="ad-contact-name" class="input-text" name="ad_contact_name" value="" /><br /><label>Contact Email</label><input id="ad-contact-email" class="input-text" name="ad_contact_email" value="" /><br /><input type="hidden" id="ad-title" class="input-text" value="empty" /><div class="message" style="margin-top:10px;"></div><div id="message-main" class="message red"></div><input type="submit" value="Submit" id="ad-submitbutton" class="input-submit" name="submit" style="margin-left:130px;" /></form></div></div>';var boxycontentkonamicodehome='<div><div class="boxy-content-main">Works perfectly on all pages with icons.<br />Click to <a href="'+baseurl+'search?q=rose&res=128&sort=color&color=c14"><b>search icons</b></a> or <a href="'+baseurl+'show/i-icons-by-treetog.html"><b>browse icons</b></a>,<br />then enter the Konami Code.<div class="boxy-close-button">OK</div></div></div>';function showloginbox(target){if(typeof(loginboxy)!='undefined'){loginboxy.unload();}
if(target=='login'){loginboxy=new Boxy(boxycontentlogin,{title:"Login"});loginboxy.tween(500,250);var lastusername=readCookie('LastUsername');if(lastusername){document.getElementById('login-username').value=lastusername;$('#login-password').focus();}
else{$('#login-username').focus();}}
if(target=='logout'){loginboxy=new Boxy(boxycontentloginlogout,{title:"Logout"});loginboxy.tween(300,130);var dataString='action=logout';$.ajax({type:"POST",url:baseurl+"static/php/ajax/ia_login.php",data:dataString,success:function(msg){$('#message-main').html(msg);}});}
if(target=='register'){loginboxy=new Boxy(boxycontentloginregister,{title:"Signup for IconArchive"});loginboxy.tween(640,350);$('#register-username').focus();}
if(target=='forgotpassword'){loginboxy=new Boxy(boxycontentloginforgotpassword,{title:"Forgot Password"});loginboxy.tween(600,270);$('#forgotpassword-username').focus();}
if(target=='createad'){loginboxy=new Boxy(boxycontentcreatead,{title:"Create Your Ad"});loginboxy.tween(640,600);$('#ad-url').focus();}
if(target=='createadbigpic'){loginboxy=new Boxy(boxycontentcreateadbigpic,{title:"Create Your Ad"});loginboxy.tween(640,430);$('#ad-url').focus();}
if(target=='mydeskgroupedit'){loginboxy=new Boxy(mydeskcontentgroupedit,{title:"Edit Folder Name"});$('#mydeskgroupedit-name').focus();}
if(target=='mydeskgroupshare'){loginboxy=new Boxy(mybody,{title:"Share this Icon Folder (via mail)"});}
if(target=='konamicodehome'){loginboxy=new Boxy(boxycontentkonamicodehome,{title:"Easter Egg"});loginboxy.tween(320,150);}
return false;}
function showinfobox(text,mytitle){if(typeof(infoboxy)!='undefined'){infoboxy.unload();}
html='<div><div class="boxy-content-main">'+text+'<div class="boxy-close-button">OK</div></div></div>';infoboxy=new Boxy(html,{title:'Info'});if(mytitle)
infoboxy.setTitle(mytitle);}
$(function(){Boxy.DEFAULTS.modal=false;Boxy.DEFAULTS.closeable=true;Boxy.DEFAULTS.closeText='';$('.donatebutton').click(function(){document.getElementById('donate').submit();return false;});$('.shutterimg').mousedown(function(event){switch(event.which){case 1:return track('search_shutterstock_event_click_left');break;case 2:return track('search_shutterstock_event_click_middle');break;case 3:return track('search_shutterstock_event_click_right');break;default:return track('search_shutterstock_event_click_strange');}});$('.clicktracker').mousedown(function(event){url=$(this).attr('href');source=$(this).attr('trackdata');mouseevent=event.which;$.ajax({type:"POST",url:baseurl+"static/php/ajax/log_clickcounter.php",data:{action:'send',source:source,url:url,mouseevent:mouseevent}});return false;});$('.introbar-auction-plus').click(function(){showloginbox('createad');price=$(this).attr('price');$('.boxy-content-main .ad-price').text(price);$('.boxy-content-main #ad-price-hidden').val(price);return false;});$('.introbar-auction-plus.bigpic').click(function(){showloginbox('createadbigpic');price=$(this).attr('price');$('.boxy-content-main .ad-price').text(price);$('.boxy-content-main #ad-price-hidden').val(price);return false;});$('#ad-title').live('keyup',function(){var limit=30;var text=$(this).val();var chars=text.length;var left=30-chars;$('#ad-title-char-counter').text(left);if(chars>limit){var new_text=text.substr(0,limit);$(this).val(new_text);}});$('#ad-body').live('keyup',function(){var limit=175;var text=$(this).val();var chars=text.length;var left=175-chars;$('#ad-body-char-counter').text(left);if(chars>limit){var new_text=text.substr(0,limit);$(this).val(new_text);}});$('#ad-submitbutton').live('click',function(){var mymailfrom=$('#mydeskgroupshare-from').val();var mymailto=$('#mydeskgroupshare-to').val();var mymailsubject=$('#mydeskgroupshare-subject').val();var myadurl=$('#ad-url').val();var myadtitle=$('#ad-title').val();var myadbody=$('#ad-body').val();var myadimage=$('#ad-image').val();var myadprice=$('#ad-price-hidden').val();var myadduration=$('#ad-duration').val();var myadcontactname=$('#ad-contact-name').val();var myadcontactemail=$('#ad-contact-email').val();if(!myadurl||myadurl=='http://'){$('#ad-url').focus();return false;}
else if(!myadtitle){$('#ad-title').focus();return false;}
else if(!myadimage||myadimage=='http://'){$('#ad-image').focus();return false;}
else if(!myadcontactname){$('#ad-contact-name').focus();return false;}
else if(!myadcontactemail){$('#ad-contact-email').focus();return false;}
else if(!emailReg.test(myadcontactemail)){$('#ad-contact-email').focus();alert("Invalid Contact Email address. Please correct.");return false;}
jQuery('.boxy-content-main').ajaxLoader();$.ajax({type:"POST",url:baseurl+"static/php/ajax/ia_contact_admin.php",data:{action:'send',myadurl:myadurl,myadtitle:myadtitle,myadbody:myadbody,myadimage:myadimage,myadprice:myadprice,myadduration:myadduration,myadcontactname:myadcontactname,myadcontactemail:myadcontactemail},success:function(msg){jQuery('.boxy-content-main').ajaxLoaderRemove();if(msg=='ok'){if(typeof(loginboxy)!='undefined')
loginboxy.unload();showinfobox('Your ad creation was successful.<br />We will contact you shortly with payment details.<br />Thank you for your business.','Success');}
else{alert('Error: '+msg);}}});return false;});$('a.ext').click(function(){pageTracker._trackEvent('links','external',$(this).attr('href'));return true;});$('#login').click(function(){showloginbox('login');return false;});$('#logout').click(function(){showloginbox('logout');return false;});$('#register').click(function(){showloginbox('register');return false;});$('#forgotpassword').click(function(){showloginbox('forgotpassword');return false;});$('.input-text').live('focusin',function(){$(this).css('background-color','#ffedd3');});$('.input-text').live('focusout',function(){$(this).css('background-color','#ffffff');});$('.boxy-close-button').live('click',function(){$(this).closest('.boxy-wrapper').fadeOut();});$('#login-submitbutton').live('click',function(){var username=$('#login-username').val();var password=$('#login-password').val();if(!username){$('#login-username').focus();return false;}
if(!password){$('#login-password').focus();return false;}
var dataString='action=login&username='+username+'&password='+password;jQuery('.boxy-content-main').ajaxLoader();$.ajax({type:"POST",url:baseurl+"static/php/ajax/ia_login.php",data:dataString,success:function(msg){jQuery('.boxy-content-main').ajaxLoaderRemove();if(msg=='ok'){createCookie('LastUsername',username,365);location.reload(true);}
else{$('#message-main').html(msg);$('#login-username').css("background-color","#e1a196");$('#login-password').css("background-color","#e1a196");}}});return false;});$('#logout-submitbutton').live('click',function(){location.reload(true);return false;});$('#register-username').live('keyup',function(){$('#register-username-check').css('visibility','visible');var validusername=/^[0-9a-zA-Z\-]+$/;var username=$('#register-username').val();if(username.length<2){$('#register-username-check').html('<div class="back-info">Username too short.</div>');$('#register-username-check').css('background-color','#ffedd3');}
else if(username.search(validusername)==-1){$('#register-username-check').html('<div class="back-no">Invalid characters.</div>');$('#register-username-check').css('background-color','#ffb9b9');}
else{$('#register-username-check div').html('Checking...');var dataString='action=check&username='+username;if(this.value!=this.lastValue){if(this.timer)clearTimeout(this.timer);this.timer=setTimeout(function(){$.ajax({url:baseurl+"static/php/ajax/ia_login.php",data:dataString,type:'post',success:function(msg){if(msg=='ok'){$('#register-username-check').html('<div class="back-yes">Username available.</div>');$('#register-username-check').css('background-color','#d3f0a2');}
else{$('#register-username-check').html('<div class="back-no">'+msg+'</div>');$('#register-username-check').css('background-color','#ffb9b9');}}});},500);this.lastValue=this.value;}}
return false;});$('#register-submitbutton').live('click',function(){var username=$('#register-username').val();var email=$('#register-email').val();if(!username){$('#register-username').focus();return false;}
if(!email){$('#register-email').focus();return false;}
var dataString='action=register&username='+username+'&email='+email;$.ajax({url:baseurl+"static/php/ajax/ia_login.php",data:dataString,type:"post",success:function(msg){if(msg=='ok'){$('.boxy-content-main').fadeOut('slow',function(){$('.boxy-content-main').html(boxycontentloginregister_success.replace('###username###',username).replace('###usernamesmall###',username.toLowerCase()).replace('###usernamesmall###',username.toLowerCase()).replace('###email###',email)).hide().fadeIn('slow');});}
else{$('#message-main').html(msg);if(msg.charAt(0)=="U")
$('#register-username').focus();else
$('#register-email').focus();}}});return false;});$('#forgotpassword-submitbutton').live('click',function(){var username=$('#forgotpassword-username').val();if(!username){$('#forgotpassword-username').focus();return false;}
var dataString='action=forgotpassword&username='+username;jQuery('.boxy-content-main').ajaxLoader();$.ajax({type:"POST",url:baseurl+"static/php/ajax/ia_login.php",data:dataString,success:function(msg){jQuery('.boxy-content-main').ajaxLoaderRemove();if(msg=='ok'){$('.boxy-content-main').html(boxycontentloginforgotpassword_success).hide().fadeIn('slow');}
else{$('#message-main').html(msg);$('#forgotpassword-username').css("background-color","#e1a196");}}});return false;});});$(function(){$('.tag').live('mouseover mouseout',function(event){if(event.type=='mouseover'){$(this).find('ul').show();$(this).find('a').addClass('tagedit-active');}else{$(this).find('ul').hide();$(this).find('a').removeClass('tagedit-active');}});$('#tag-add-input').click(function(){$('#tag-add-input').css('background-color','#F2F4F9');$('.tag-add-message').fadeIn();});$('body').mouseup(function(){if(isset('tag_add_message_show')){if(tag_add_message_show!=1){$('.tag-add-message').fadeOut();$('#tag-add-input').css('background-color','#FFF');}}
else
$('.tag-add-message').fadeOut();$('#tag-add-input').css('background-color','#FFF');});$('form.tag-add').hover(function(){tag_add_message_show=1;},function(){tag_add_message_show=0;});$('#tag-add-submit').click(function(){ajax_tagadd();});$('.tag ul li.view').live('click',function(){location.href=$(this).closest('.tag').find('a').attr('href');});$('.tag ul li.up').live('click',function(){if(!($(this).closest('.tag').attr('voted')=='yes'))
ajax_tagedit($(this).closest('.tag').attr('tid'),'up');else
alert('You already voted for this tag.');});$('.tag ul li.down').live('click',function(){if(!($(this).closest('.tag').attr('voted')=='yes'))
ajax_tagedit($(this).closest('.tag').attr('tid'),'down');else
alert('You already voted for this tag.');});$('.tag ul li.abuse').live('click',function(){if(!($(this).closest('.tag').attr('voted')=='yes'))
ajax_tagedit($(this).closest('.tag').attr('tid'),'abuse');else
alert('You already voted for this tag.');});$('.tag ul li.remove').live('click',function(){ajax_tagedit($(this).closest('.tag').attr('tid'),'remove');});});function ajax_tagadd(){var tag=$('#tag-add-input').val().toLowerCase();tag=jQuery.trim(tag);var validtag=/^[0-9]{0,1}[a-zA-Z ]+[0-9]{0,1}$/;var spaceCounterHelp=tag.split(" ");spaceCounter=spaceCounterHelp.length-1;var iconid=$('#tag-add-input').attr('iconid');if(tag.length<1){$('#tag-add-errormsg').html('<b>Error:</b> Tag too short.');$('#tag-add-errormsg').fadeIn();}
else if(tag.length>25){$('#tag-add-errormsg').html('<b>Error:</b> Tag too long.');$('#tag-add-errormsg').fadeIn();}
else if(tag.search(validtag)==-1){$('#tag-add-errormsg').html('<b>Error:</b> Invalid characters. Only English characters and up to one space character are allowed.');$('#tag-add-errormsg').fadeIn();}
else if(spaceCounter>2){$('#tag-add-errormsg').html('<b>Error:</b> Tag contains more than one space character.');$('#tag-add-errormsg').fadeIn();}
else if(tag.search('porn')!=-1){$('#tag-add-errormsg').html('<b>Error:</b> String "porn" is not allowed.');$('#tag-add-errormsg').fadeIn();}
else if(tag.search('fuck')!=-1){$('#tag-add-errormsg').html('<b>Error:</b> String "fuck" is not allowed.');$('#tag-add-errormsg').fadeIn();}
else if(tag.search(' com')!=-1){$('#tag-add-errormsg').html('<b>Error:</b> String " com" is not allowed.');$('#tag-add-errormsg').fadeIn();}
else if(tag.search('dotcom')!=-1){$('#tag-add-errormsg').html('<b>Error:</b> String "dotcom" is not allowed.');$('#tag-add-errormsg').fadeIn();}
else if(tag.search(' net')!=-1){$('#tag-add-errormsg').html('<b>Error:</b> String " net" is not allowed.');$('#tag-add-errormsg').fadeIn();}
else if(tag.search('dotnet')!=-1){$('#tag-add-errormsg').html('<b>Error:</b> String "dotnet" is not allowed.');$('#tag-add-errormsg').fadeIn();}
else{$('#tag-add-errormsg').fadeOut();$('#tag-add-errormsg').html('');var dataString='action=tagadd&iconid='+iconid+'&tag='+tag;$.ajax({type:"POST",url:baseurl+"static/php/ajax/ia_tagedit.php",data:dataString,success:function(msg){if(isNumber(msg)){$('form.tag-add').before('<div class="tag" tid="'+msg+'"><a href="'+baseurl+'tag/'+tag.replace(" ","-")+'" class="tagedit">'+tag+'</a><ul><li class="view">Search tag</li><li class="up">Good (<span class="count">1</span>)</li><li class="down">Bad (<span class="count">0</span>)</li><li class="remove">Remove</li></ul></div>');$('#tag-add-input').attr('value','');if($('div.tag').size()>9)
$('form.tag-add').hide();}
else{$('#tag-add-errormsg').html('<b>Error:</b> '+msg);$('#tag-add-errormsg').fadeIn();}}});return false;}}
function ajax_tagedit(tid,action){if(action=='remove'){$('.tag').each(function(index){if($(this).attr('tid')==tid)
$(this).remove();});action='abuse';}
var dataString='action='+action+'&tid='+tid;$('.tag').each(function(index){if($(this).attr('tid')==tid){$(this).attr('voted','yes');$(this).find('.up').addClass('inactive');$(this).find('.down').addClass('inactive');$(this).find('.abuse').addClass('inactive');$(this).find('.'+action).removeClass('inactive');var counter=parseInt($(this).find('.'+action).find('.count').text())+1;$(this).find('.'+action).find('.count').text(counter);$(this).find('.'+action).addClass('voted');$(this).find('.'+action).addClass('voted');}});$.ajax({type:"POST",url:baseurl+"static/php/ajax/ia_tagedit.php",data:dataString,success:function(msg){if(msg=='ok'){}
else if(msg=='removed'){}
else{}}});return false;}
$(function(){calculate_distribution_height();$('.rating .star').hover(function(){if(isEmpty($(this).closest('.rating').attr('rated'))){$(this).addClass("yellow");$(this).prevAll('.star').addClass("yellow");$(this).nextAll('.star').addClass("grey");$(this).nextAll('.rating-text').find('.rating-text-content').text($(this).attr('title'));}
else{$(this).nextAll('.rating-text').find('.rating-text-content').html('<span style="color:#45A563;">Voting done. (<b>'+$(this).closest('.rating').attr('rated')+'</b>)</span>');}},function(){$('.rating .star').removeClass("yellow");$('.rating .star').removeClass("grey");$(this).nextAll('.rating-text').find('.rating-text-content').text($(this).closest('.rating').attr('value')+' ('+$(this).closest('.rating').attr('votes')+' votes)');});$('.rating .star').click(function(){if(isEmpty($(this).closest('.rating').attr('rated'))){myvote=$(this).attr('vote');votes=parseInt($(this).closest('.rating').attr('votes'));newvalue=(Math.round($(this).closest('.rating').attr('value')*votes)+parseInt($(this).attr('vote')))/(votes+1);newvalue=newvalue.toFixed(2);if(votes==0){$(this).addClass("red100");$(this).prevAll('.star').addClass("red100");}
var dataString='action='+$(this).closest('.rating').attr('type')+'&id='+$(this).closest('.rating').attr('key')+'&value='+myvote;$.ajax({type:"POST",url:baseurl+"static/php/ajax/ia_vote.php",data:dataString,success:function(msg){if(msg=='ok'){$('.rating').attr('value',newvalue);$('.rating').attr('votes',(votes+1));$('.rating').attr('rated',myvote);$('.rating .star').css('cursor','default');$('.rating .rating-text').find('.rating-text-content').text(newvalue+' ('+(votes+1)+' votes)');newvotes=parseInt($('.rating .rating-distribution #voted'+myvote).attr('value'))+1;$('.rating .rating-distribution #voted'+myvote).attr('value',newvotes);$('.rating .rating-distribution #voted'+myvote).attr('title',newvotes+' votes');calculate_distribution_height();}
else{alert(msg);}}});}
else{alert('Voting already done. You voted '+myvote+' star(s) for this icon or icon set.');}
return false;});});function calculate_distribution_height(){max=0;$('.rating-distribution .voted').each(function(index){if(parseInt($(this).attr('value'))>max)
max=$(this).attr('value');});$('.rating-distribution .voted').each(function(index){if(max>0){newheight=($(this).attr('value')/max)*55;$(this).css('height',newheight+'px');}});}
$(function(){$('.tooltip-top').each(function(index){$(this).simpletip({fixed:true,position:'top',offset:[0,-5],content:$(this).find('.tooltipcontent').html(),hidden:true});});$('.tooltip-below').each(function(index){$(this).simpletip({fixed:false,position:'below',offset:[9,20],content:$(this).find('.tooltipcontent').html(),hidden:true,showEffect:'none'});});$('#metanav-search-submit').click(function(){$("form:first").submit();});$('#button-refresh').click(function(){location.reload();});$('#layout-search-filter-switcher').click(function(){if($(this).hasClass('filter-hidden')){$('#layout-search-filter-switcher').removeClass('filter-hidden');$('#layout-search-filter').animate({'margin-left':'-20px'},500,'swing',function(){configuser["filter_hidden"]=0;saveArray('configuser',configuser);});}else{$('#layout-search-filter').animate({'margin-left':'-240px'},500,'swing',function(){$('#layout-search-filter-switcher').addClass('filter-hidden');configuser["filter_hidden"]=1;saveArray('configuser',configuser);});}});});$(function(){$('.artists-filter-custom li a').click(function(){$('.artists-filter-custom li a').removeClass('active');$(this).addClass('active');$(this).closest('.filter-dropdown').find('.selected').text($(this).text());customdesign=$(this).attr('id').replace(/custom-/g,"");$(this).closest('.filter-dropdown').find('ul').animate({height:'0'},{duration:100,complete:function(){$('.filter-dropdown ul').css('height','auto');$('.filter-dropdown ul').css('display','');$('.cloud a').each(function(index){if(customdesign=='yes'){if($(this).attr('custom')==1)
$(this).css('display','inline-block');else
$(this).css('display','none');}
else
$(this).css('display','inline-block');});}});});$('.artists-sort li a').click(function(){$('.artists-sort li a').removeClass('active');$(this).addClass('active');$(this).closest('.filter-dropdown').find('.selected').text($(this).text());highlightfield=$(this).attr('id').replace(/sort-/g,"");$(this).closest('.filter-dropdown').find('ul').animate({height:'0'},{duration:100,complete:function(){$('.filter-dropdown ul').css('height','auto');$('.filter-dropdown ul').css('display','');$('.cloud a').each(function(index){$(this).removeClass($(this).attr('class'));$(this).addClass($(this).attr(highlightfield+'c'));$(this).find('.num').text($(this).attr(highlightfield));});}});});$('#artists-sets').click(function(){$('.cloud a').each(function(index){$(this).removeClass($(this).attr('class'));$(this).addClass($(this).attr('setsc'));$(this).find('.num').text($(this).attr('sets'));});$('#artists-sets').removeClass('active');$('#artists-icons').removeClass('active');$('#artists-sets').addClass('active');});$('#artists-icons').click(function(){$('.cloud a').each(function(index){$(this).removeClass($(this).attr('class'));$(this).addClass($(this).attr('iconsc'));$(this).find('.num').text($(this).attr('icons'));});$('#artists-sets').removeClass('active');$('#artists-icons').removeClass('active');$('#artists-icons').addClass('active');});$('#artists-ratings').click(function(){$('.cloud a').each(function(index){$(this).removeClass($(this).attr('class'));$(this).addClass($(this).attr('ratingc'));});});});$(function(){if(configuser["favbar_pinned"]==1){$('#metanav-favbar').css('bottom','0px');$('#metanav-favbar-toggle').addClass('active');}
myiconloadfavbar();$('.metanav-favbar-header-close').click(function(){Boxy.confirm('Do you want to remove<br />the IconFavbar for this browser session?<br />You can still add favs and view them on your desk.<br />To reactivate the IconFavbar, close your browser and open it again.',function(){$('#metanav-favbar-hover').remove();$('#metanav-favbar').remove();configuser["favbar_hidden"]=1;saveArray('configuser',configuser);},{title:'Confirmation'});return false;});if(configuser["display_bgcolor"]){$('.settings-display-bgcolor input.color').css('background-color',configuser['display_bgcolor']);$('.icondetail').css('background-color',configuser['display_bgcolor']);}
$('#metanav-favbar-toggle').click(function(){if($(this).hasClass('active')){configuser["favbar_pinned"]=0;$("#metanav-favbar").animate({"bottom":"-80px"},500,function(){$('#metanav-favbar-toggle').removeClass('active');});}
else{configuser["favbar_pinned"]=1;$("#metanav-favbar").animate({"bottom":"0"},500,function(){$('#metanav-favbar-toggle').addClass('active');});}
saveArray('configuser',configuser);});$('#metanav-favbar .metanav-favbar-header-pin').click(function(){if($(this).hasClass('active')){configuser["favbar_pinned"]=0;$('#metanav-favbar .metanav-favbar-header-pin').removeClass('active');$('#metanav-favbar').fadeOut();}
else{configuser["favbar_pinned"]=1;$('#metanav-favbar .metanav-favbar-header-pin').addClass('active');}
saveArray('configuser',configuser);});$('#metanav-favbar .metanav-favbar-delete').live('click',function(){$(this).fadeOut();$(this).closest('li').find('img').fadeOut('normal',function(){$(this).closest('li').animate({width:'0px'},'slow',function(){$(this).closest('li').remove();});});var iconid=$(this).closest('li').attr('id');myicondelete(iconid);});$('.fav').click(function(){var offset=$(this).offset();var offsetfavbar=$('#metanav-favbar-toggle').offset();$('.flyingheart').css('left',offset.left+'px');$('.flyingheart').css('top',offset.top+'px');$('.flyingheart').animate({'left':'-20px','top':(offsetfavbar.top+80)+'px'},800);var iconid=$(this).closest('div.icondetail').attr('id');var iconsrc=$(this).closest('div.icondetail').find('img').attr('src');var iconhref=$(this).closest('div.icondetail').find('a').attr('href');iconid=iconid.replace(/icon-(.*)$/,'$1');iconprimaryres=iconid.replace(/.*-(.*)$/,'$1');iconsrc=iconsrc.replace(/\/[0-9]+(\/[^\/]*)$/,'/'+iconprimaryres+'$1');iconsrc=iconsrc.replace(/^.*?\/icons\/(.*)$/,'$1');$('#metanav-favbar').show();if(myiconadd(iconid,iconsrc)){var stylemargintop='';if(iconprimaryres=='png')
var stylemargintop='margin-top:16px;';else if(iconprimaryres<48)
var stylemargintop='margin-top:'+((48-iconprimaryres)/2)+'px;';$('ul.metanav-favbar-list').prepend('<li id="'+iconid+'" style="width:0px;"><a href="'+baseurl+getIconHrefFromIconSrc(iconsrc)+'"><img src="'+baseurl+TmpTestServerIconPath+'icons/'+iconsrc+'" style="display:none;'+stylemargintop+'"></a><div class="metanav-favbar-delete" style="display:none;"></div></li>');$('ul.metanav-favbar-list li:first').animate({width:'80px'},'slow',function(){$('ul.metanav-favbar-list li:first .metanav-favbar-delete').fadeIn('normal');$('ul.metanav-favbar-list li:first img').fadeIn('normal',function(){$('ul.metanav-favbar-list img').css('display','inline-block');if(configuser["favbar_pinned"]!=1){}});});}
else{showinfobox(errormessage);}
if(userlogin=='1'){}
else{}
return false;});});function createCookie(name,value,days,path,domain){var cookie_string=name+"="+base64_encode(value);if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));cookie_string+="; expires="+date.toGMTString();}
if(path)
cookie_string+="; path="+escape(path);else
cookie_string+="; path=/";if(domain)
cookie_string+="; domain="+escape(domain);document.cookie=cookie_string;}
function readCookie(name){var nameEQ=name+"=";var ca=document.cookie.split(';');for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==' ')c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return base64_decode(c.substring(nameEQ.length,c.length));}
return null;}
function eraseCookie(name){createCookie(name,"",-1);}
function validateIconsArray(myIconsArr){if(myIconsArr){}
else
var myIconsArr=new Object();return myIconsArr;}
function readArray(cookiename){var mycookie=readCookie(cookiename);if(mycookie&&(mycookie!='null'))
var myArr=$.JSON.decode(mycookie);else
var myArr=new Object();return myArr;}
function saveArray(cookiename,myArr,days){var mycookie=$.JSON.encode(myArr);if(mycookie.length>3000){return false;}
else{createCookie(cookiename,mycookie,days);return true;}}
function getIconHrefFromIconSrc(iconsrc){return iconsrc.replace(/^(.*?)\/(.*?)\/(png|[0-9]+)\/(.*?)(\-icon|).png$/,'show/$2-icons-by-$1/$4-icon.html');if(isset(iconsrc))
return iconsrc.replace(/^(.*?)\/(.*?)\/[0-9]+\/(.*?)-icon.png$/,'show/$2-icons-by-$1/$3-icon.html');else
return'';}
function myiconloadfavbar(){myIconArr=readArray('myicons');myIconImgSrcArr=readArray('myiconssrc');if(myIconArr){for(i=0;i<22;i++){if(myIconArr[i]){myIconId=myIconArr[i];if(!isNaN(myIconId.replace('-png','').replace('-',''))){iconprimaryres=myIconId.replace(/.*-(.*)$/,'$1');var stylemargintop='';if(iconprimaryres=='png')
var stylemargintop='style="margin-top:16px;"';else if(iconprimaryres<48)
var stylemargintop='style="margin-top:'+((48-iconprimaryres)/2)+'px;"';if(myIconImgSrcArr[myIconId])
$('ul.metanav-favbar-list').append('<li id="'+myIconId+'"><a href="'+baseurl+getIconHrefFromIconSrc(myIconImgSrcArr[myIconId])+'"><img src="'+MyFileServer+baseurl+TmpTestServerIconPath+'icons/'+myIconImgSrcArr[myIconId]+'"'+stylemargintop+'></a><div class="metanav-favbar-delete"></div></li>');}
else{i=30;}}}}
if(typeof(myIconId)!=='undefined'){return true;}
else{myIconArr["0"]="Group:Recycle Bin|Private";myIconArr["1"]="Group:Icons for my Project No. 1|Public";myIconArr["2"]="Group:Icons for my Project No. 2|Public";myIconArr["3"]="Group:Icons for my Personal Desktop|Private";myIconArr["4"]="Group:Icons for my Work Desktop|Private";saveArray('myicons',myIconArr,3*365);return false;}}
function myiconadd(iconid,iconsrc,iconhref){var myIconArr=new Object();var myIconArrNew=new Object();var myIconImgSrcArr=new Object();var myIconImgSrcArrNew=new Object();myIconArr=readArray('myicons');myIconImgSrcArr=readArray('myiconssrc');myIconArrNew['0']=iconid;myIconImgSrcArrNew[iconid]=iconsrc;var counter=1;for(var i in myIconArr)
{if(myIconArr[i]==iconid){errormessage='This icon is already in your favorites.';return false;}
else{myIconArrNew[counter]=myIconArr[i];if(counter<30){myIconImgSrcArrNew[myIconArr[i]]=myIconImgSrcArr[myIconArr[i]];}
counter++;}}
if(saveArray('myicons',myIconArrNew,3*365)){saveArray('myiconssrc',myIconImgSrcArrNew,3*365);return true;}
else{errormessage='Icon storage limit reached (Maximum cookie size).<br />We will expand this storage limit<br />for registered users soon.';return false;}}
function myicondelete(iconid){var myIconArrNew=new Object();myIconArr=readArray('myicons');var counter=1;for(var i in myIconArr)
{if(myIconArr[i]!=iconid){myIconArrNew[counter]=myIconArr[i];counter++;}}
saveArray('myicons',myIconArrNew,3*365);return true;}
function favBarShow(){$('#metanav-favbar').fadeIn();}
function favBarHide(){if(configuser["favbar_pinned"]!=1)$('#metanav-favbar').fadeOut();}
function nix(){dummy=1;}
function UserIsLoggedIn(){if(userlogin=='1'){return true;}
else{showloginbox('login');return false;}};function isset(varname){if(typeof(window[varname])!="undefined")
return true;else
return false;}
function isEmpty(obj){for(var prop in obj){if(obj.hasOwnProperty(prop))
return false;}
return true;}
function showObject(obj){if(isValidObject(obj)){var text='';for(var i in obj)
{text=text+'obj[\''+i+'\'] is '+obj[i]+'\n';}
alert(text);}
else
alert('No valid Object');}
function isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n);}
function isValidObject(objToTest){if(null==objToTest)return false;if("undefined"==typeof(objToTest))return false;return true;}
function base64_encode(data){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=[];if(!data){return data;}
data=this.utf8_encode(data+'');do{o1=data.charCodeAt(i++);o2=data.charCodeAt(i++);o3=data.charCodeAt(i++);bits=o1<<16|o2<<8|o3;h1=bits>>18&0x3f;h2=bits>>12&0x3f;h3=bits>>6&0x3f;h4=bits&0x3f;tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4);}while(i<data.length);enc=tmp_arr.join('');switch(data.length%3){case 1:enc=enc.slice(0,-2)+'==';break;case 2:enc=enc.slice(0,-1)+'=';break;}
return enc;}
function base64_decode(data){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var o1,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,dec="",tmp_arr=[];if(!data){return data;}
data+='';do{h1=b64.indexOf(data.charAt(i++));h2=b64.indexOf(data.charAt(i++));h3=b64.indexOf(data.charAt(i++));h4=b64.indexOf(data.charAt(i++));bits=h1<<18|h2<<12|h3<<6|h4;o1=bits>>16&0xff;o2=bits>>8&0xff;o3=bits&0xff;if(h3==64){tmp_arr[ac++]=String.fromCharCode(o1);}else if(h4==64){tmp_arr[ac++]=String.fromCharCode(o1,o2);}else{tmp_arr[ac++]=String.fromCharCode(o1,o2,o3);}}while(i<data.length);dec=tmp_arr.join('');dec=this.utf8_decode(dec);return dec;}
function utf8_encode(argString){var string=(argString+'');var utftext="";var start,end;var stringl=0;start=end=0;stringl=string.length;for(var n=0;n<stringl;n++){var c1=string.charCodeAt(n);var enc=null;if(c1<128){end++;}else if(c1>127&&c1<2048){enc=String.fromCharCode((c1>>6)|192)+String.fromCharCode((c1&63)|128);}else{enc=String.fromCharCode((c1>>12)|224)+String.fromCharCode(((c1>>6)&63)|128)+String.fromCharCode((c1&63)|128);}
if(enc!==null){if(end>start){utftext+=string.substring(start,end);}
utftext+=enc;start=end=n+1;}}
if(end>start){utftext+=string.substring(start,string.length);}
return utftext;}
function utf8_decode(str_data){var tmp_arr=[],i=0,ac=0,c1=0,c2=0,c3=0;str_data+='';while(i<str_data.length){c1=str_data.charCodeAt(i);if(c1<128){tmp_arr[ac++]=String.fromCharCode(c1);i++;}else if((c1>191)&&(c1<224)){c2=str_data.charCodeAt(i+1);tmp_arr[ac++]=String.fromCharCode(((c1&31)<<6)|(c2&63));i+=2;}else{c2=str_data.charCodeAt(i+1);c3=str_data.charCodeAt(i+2);tmp_arr[ac++]=String.fromCharCode(((c1&15)<<12)|((c2&63)<<6)|(c3&63));i+=3;}}
return tmp_arr.join('');}
var p=0;var order=[38,38,40,40,37,39,37,39,66,65];document.onkeyup=function(e)
{var key=(window.event)?event.keyCode:e.keyCode;p=(order[p]==key)?++p:0;if(p==order.length){if(homepage=="1")
showloginbox('konamicodehome');else{$('#metanav-favbar').remove();R=0;x1=.1;y1=.10;x2=.25;y2=.34;x3=1.6;y3=.24;x4=350;y4=130;x5=600;y5=330;DI=document.images;DIL=DI.length;setInterval('A()',20);}}};function A(){for(i=1;i-DIL;i++){DIS=DI[i].style;DIS.position='absolute';DIS.left=(Math.sin(R*x1+i*x2+x3)*x4+x5)+'px';DIS.top=(Math.cos(R*y1+i*y2+y3)*y4+y5)+'px'}R++;}